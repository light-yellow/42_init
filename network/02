broadcast_address=$(ifconfig en0 | grep 'broadcast' | awk '{print $6}')
echo "Broadcast address:"
echo $broadcast_address

echo "IP adresses which are part of the same subnet:"
arp -a | grep -Eo "([0-9]{1,3}[\.]){3}[0-9]{1,3}"

# ARP (Address Resolution Protocol - протокол определения адреса) — протокол, предназначенный для преобразования IP-адресов в MAC-адреса. 
# ARP-таблица отображает IP и MAC подключенных к серверу сетевых устройств.
# arp -a отображает содержимое таблицы.





#arp -a | grep "42.fr" | awk -F "[()]" '{print $2}'
#arp -a -i en0 | cut -d '(' -f 2 | rev | cut -d ')' -f 2 | rev
#xargs ping -t 2 && arp -a | cut -d '(' -f 2 | cut -d ')' -f 1
#ping -c 2 $(ifconfig en0 | grep -w "broadcast" | cut -c 46-) && arp -a
#arp -a | grep "fr" | cut -d ' ' -f2 | sed "s/(//g;s/)//g"
#$(ping -c1 $broadcast_ip > /dev/null ; arp -a
#ping 192.168.21.255 -c2 | arp -a | awk ' {print $2} '
ping -c 3 `ifconfig en0 | grep broadcast | sed 's/.*broadcast //'` && arp -aln | grep '[0-9]' | sed 's/ .*//'


broadcast=$(ifconfig en0 | grep -oE "([0-9]+.){3}255")
echo $broadcast
ping -c 2 $broadcast > /dev/null
arp -a | grep -oE "$(echo $broadcast | cut -c 1-9)[0-9].[0-9]+"


#пингануть броадкаст адрес надо. На русском - "широковещательный адрес". При обращении к нему, команда отправляется на все устройства в заданной сети. Поэтому при пинге по нему, мы получим ответ от всех, и "запомним" про них информацию
# PING означает Packet InterNet Groper. Утилита или программа для определения того, доступен ли конкретный IP-адрес из вашей сети или хост / сервер. Утилита Ping обычно используется для проверки сетевых ошибок и диагностики этой проблемы. Механизм работы прост, он отправляет пакет на указанный IP-адрес /хост /адрес сервера, ожидает ответа от этого хоста и измеряет время ответа. Это также называется задержкой.
